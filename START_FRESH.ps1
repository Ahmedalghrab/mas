# ?? ?????? ????? Almasa ?? ????? ?????? ?????

Write-Host "???????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host "   ?? Almasa - ????? ????? ???????? ???????   " -ForegroundColor Cyan
Write-Host "???????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host ""

# ?????? ?? ??????
$projectPath = "C:\halah\mas\mas"
Set-Location $projectPath
Write-Host "?? ?????? ??????: $projectPath" -ForegroundColor Green
Write-Host ""

# 1. ??? ????? ???????? ???????
Write-Host "???  ?????? 1: ??? ????? ???????? ???????..." -ForegroundColor Yellow
$dbFiles = @("mas.db", "mas.db-shm", "mas.db-wal")
foreach ($file in $dbFiles) {
    if (Test-Path $file) {
        Remove-Item $file -Force
        Write-Host "   ? ?? ???: $file" -ForegroundColor Green
    } else {
     Write-Host "   ??  ??? ?????: $file" -ForegroundColor Gray
    }
}
Write-Host ""

# 2. ????? bin ? obj
Write-Host "?? ?????? 2: ????? ?????? ??????..." -ForegroundColor Yellow
if (Test-Path "bin") {
    Remove-Item -Recurse -Force "bin" -ErrorAction SilentlyContinue
    Write-Host "   ? ?? ???: bin" -ForegroundColor Green
}
if (Test-Path "obj") {
    Remove-Item -Recurse -Force "obj" -ErrorAction SilentlyContinue
    Write-Host "   ? ?? ???: obj" -ForegroundColor Green
}
Write-Host ""

# 3. ???? ???????
Write-Host "?? ?????? 3: ???? ???????..." -ForegroundColor Yellow
dotnet build --verbosity quiet
if ($LASTEXITCODE -eq 0) {
    Write-Host "   ? ?? ?????? ?????!" -ForegroundColor Green
} else {
 Write-Host "   ? ??? ??????!" -ForegroundColor Red
    exit 1
}
Write-Host ""

# 4. ????? ???????
Write-Host "?? ?????? 4: ????? ???????..." -ForegroundColor Yellow
Write-Host ""
Write-Host "????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host "   ?? ????? ??? ??? ??? ???????:          " -ForegroundColor White
Write-Host "   ? Database seeded successfully          " -ForegroundColor Green
Write-Host "????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host ""
Write-Host "?? ???? ??????? ???:" -ForegroundColor Yellow
Write-Host "   ?? http://localhost:5212" -ForegroundColor Cyan
Write-Host ""
Write-Host "?? ??????? ????? ??????:" -ForegroundColor Yellow
Write-Host "   Email: admin@mas.com" -ForegroundColor White
Write-Host "   Password: Admin@123" -ForegroundColor White
Write-Host ""
Write-Host "? ???? ???????..." -ForegroundColor Green
Write-Host "????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host ""

# ????? ???????
dotnet run
